(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{2523:(e,s,a)=>{"use strict";a.d(s,{p:()=>r});var t=a(5155),l=a(2115),i=a(9434);let r=l.forwardRef((e,s)=>{let{className:a,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});r.displayName="Input"},4186:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4516:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6932:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},7257:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L,runtime:()=>C});var t=a(5155),l=a(2115),i=a(5695),r=a(285),n=a(6695),c=a(2523),d=a(5169),o=a(7924),m=a(6932),x=a(1007),h=a(646),p=a(4861),g=a(9420),u=a(8883),j=a(9074),f=a(4186),N=a(4516),b=a(7930),y=a(6874),v=a.n(y),w=a(3568),k=a(7281),A=a(6886);let C="edge";function L(){let e=(0,i.useRouter)(),s=(0,i.useSearchParams)(),[a,y]=(0,l.useState)([]),[C,L]=(0,l.useState)(!0),[S,B]=(0,l.useState)(""),[z,P]=(0,l.useState)("all"),[D,M]=(0,l.useState)(1),[I,T]=(0,l.useState)(1),[$,_]=(0,l.useState)(null),q=(0,l.useCallback)(async()=>{try{var e;let s=await k.FH.admin.getBookings({page:D,limit:10,status:"all"!==z?z:void 0,passengerId:$||void 0});y(s.bookings||[]),T((null==(e=s.pagination)?void 0:e.pages)||1)}catch(e){w.Ay.error("Failed to load bookings")}finally{L(!1)}},[D,z,$]);(0,l.useEffect)(()=>{if(!localStorage.getItem("adminToken"))return void e.push("/admin/login");let a=null==s?void 0:s.get("passenger");a&&_(a),q()},[e,D,z,$,q,s]);let E=a.filter(e=>e.passenger.name.toLowerCase().includes(S.toLowerCase())||e.passenger.phone.includes(S)||e.passenger.email&&e.passenger.email.toLowerCase().includes(S.toLowerCase())||e.id.toLowerCase().includes(S.toLowerCase())||e.pickupLocation.toLowerCase().includes(S.toLowerCase())||e.dropoffLocation&&e.dropoffLocation.toLowerCase().includes(S.toLowerCase()));return C?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading bookings..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"container-mobile py-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(v(),{href:$?"/admin/passengers":"/admin/dashboard",children:(0,t.jsxs)(r.$,{variant:"outline",size:"sm",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Back to ",$?"Passengers":"Dashboard"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:$?"Passenger Bookings":"All Bookings"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:$?"View all bookings for this passenger":"View and manage all bookings"})]})]})})})}),(0,t.jsxs)("div",{className:"container-mobile py-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(c.p,{placeholder:"Search bookings by passenger, phone, email, ID, or location...",value:S,onChange:e=>B(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("select",{value:z,onChange:e=>P(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,t.jsx)("option",{value:"fake",children:"Fake Booking"})]})]})]})}),E.length>0?(0,t.jsx)("div",{className:"space-y-4",children:E.map(e=>{let s=(0,A.F)(e.passenger.phone);return(0,t.jsx)(n.Zp,{className:"hover:shadow-md transition-shadow",children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-lg text-gray-900",children:["Booking #",e.id]}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"confirmed":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"fake":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status}),e.notes&&(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Has Notes"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Passenger Information"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:e.passenger.name}),e.passenger.isVerified?(0,t.jsx)(h.A,{className:"h-4 w-4 text-green-500"}):(0,t.jsx)(p.A,{className:"h-4 w-4 text-red-500"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:e.passenger.phone}),s&&(0,t.jsxs)("div",{className:"flex items-center space-x-1 px-2 py-1 bg-blue-50 border border-blue-200 rounded-md",children:[(0,t.jsx)("span",{className:"text-sm",children:s.flag}),(0,t.jsx)("span",{className:"text-xs font-medium text-blue-700",children:s.name})]})]}),e.passenger.email&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:e.passenger.email})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Booking Details"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:new Date(e.bookingDate).toLocaleDateString("en-BD",{year:"numeric",month:"short",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:(e=>{let[s,a]=e.split(":"),t=parseInt(s);return"".concat(t%12||12,":").concat(a," ").concat(t>=12?"PM":"AM")})(e.pickupTime)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:e.pickupLocation})]}),e.dropoffLocation&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-sm",children:e.dropoffLocation})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-sm",children:[e.vehicle.name," (",e.vehicle.type,")"]})]})]})]})]}),e.notes&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Notes"}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e.notes})})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Trip Type:"})," ",e.tripType," trip"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,t.jsx)(v(),{href:"/admin/bookings/".concat(e.id),children:(0,t.jsx)(r.$,{variant:"outline",size:"sm",children:"View Details"})}),(0,t.jsx)("a",{href:"tel:".concat(e.passenger.phone),children:(0,t.jsx)(r.$,{variant:"outline",size:"sm",children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})})]})]})})},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(j.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:S||"all"!==z?"No bookings found":"No bookings yet"}),(0,t.jsx)("p",{className:"text-gray-600",children:S||"all"!==z?"Try adjusting your search or filter criteria.":"Bookings will appear here once passengers start making reservations."})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-8 gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",a.length," bookings",I>1&&(0,t.jsxs)("span",{className:"ml-2",children:["(Page ",D," of ",I,")"]})]}),I>1&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>M(e=>Math.max(e-1,1)),disabled:1===D,className:"btn-mobile",children:"Previous"}),(0,t.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,I)},(e,s)=>{let a;return(a=I<=5||D<=3?s+1:D>=I-2?I-4+s:D-2+s)<1||a>I?null:(0,t.jsx)(r.$,{variant:D===a?"default":"outline",size:"sm",onClick:()=>M(a),className:"btn-mobile w-8 h-8 p-0",children:a},a)}).filter(Boolean)}),(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>M(e=>Math.min(e+1,I)),disabled:D===I,className:"btn-mobile",children:"Next"})]})]})]})]})}},7924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8883:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},9446:(e,s,a)=>{Promise.resolve().then(a.bind(a,7257))}},e=>{e.O(0,[685,568,958,441,964,358],()=>e(e.s=9446)),_N_E=e.O()}]);